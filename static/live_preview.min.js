var Preview={delay:150,preview:null,buffer:null,timeout:null,mjRunning:!1,oldText:null,Init:function(){this.preview=document.getElementById("preview");this.buffer=document.getElementById("buffer")},SwapBuffers:function(){var a=this.preview,b=this.buffer;this.buffer=a;this.preview=b;a.style.visibility="hidden";a.style.position="absolute";b.style.position="";b.style.visibility=""},Update:function(){this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(this.callback,this.delay)},CreatePreview:function(){Preview.timeout=
null;if(!this.mjRunning){var a=document.getElementById("data").value,a=a.replace(/\n/g,"<br>\n");a!==this.oldtext&&(this.buffer.innerHTML=this.oldtext=a,this.mjRunning=!0,MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.buffer],["PreviewDone",this]))}},PreviewDone:function(){this.mjRunning=!1;this.SwapBuffers()}};Preview.callback=MathJax.Callback(["CreatePreview",Preview]);Preview.callback.autoReset=!0;
function discardPage(){var a=document.getElementsByName("page")[0];""==a.title.value+a.data.value?window.location="/":confirm("Are you sure you want to discard the changes?")&&(window.location="/")}function validateForm(a){var b;b=""+validateTitleEmpty(a.title);b+=validateContentEmpty(a.data);return""!=b?(alert("Some fields need correction:\n"+b),!1):!0}
function validateTitleEmpty(a){var b="";0==a.value.length?(a.style.background="#ff3333",b="Required title missing.\n"):a.style.background="#000000";return b}function validateContentEmpty(a){var b="";0==a.value.length?(a.style.background="#ff3333",b="Required content missing.\n"):a.style.background="#000000";return b}window.validateForm=validateForm;window.discardPage=discardPage;window.Preview=Preview;Preview.Init=Preview.Init;Preview.Update=Preview.Update;
